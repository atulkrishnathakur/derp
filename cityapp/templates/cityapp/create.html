{% extends 'base.html' %}
{% load static %}
{% block csscontent %} 
<link rel="stylesheet" href="{% static 'cityapp/css/style.css' %}">
{% endblock %}

{% block contenttitle %} Home Page {% endblock %}

{% block content %}
    <h2>Add City</h2>
    <form action="{% url 'cityapp:create' %}"  method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="hidden" name="get_state_ajax_url" id="get_state_ajax_url" value= {% url 'cityapp:get_state_ajax' %} >  

      <div class="form-group">
        <label for="countryname">Country:</label>
        <select class="form-control" name="countryid" id="countryname" onchange="getStateByAjax(this)" >
          <option value="">-Select-</option>
          {% for country in countries %}
              <option value="{{country.id}}">{{country.country_name}}</option>
          {% endfor %}
        </select>
        <span class="error"> {% if errorlist %} {{errorlist.country_name_err}} {% endif %}</span>
      </div>  

      <div class="form-group mb-3 mt-3">
        <label for="cityname">State:</label>
        <select class="form-control" name="cityid" id="cityname">
          <option value="">-Select-</option>
          {% for state in states %}
              <option value="{{state.id}}">{{state.state_name}}</option>
          {% endfor %}
        </select>
        <span class="error"> {% if errorlist %} {{errorlist.state_name_err}} {% endif %}</span>
      </div>


      <div class="mb-3 mt-3 form-group" >
        <label for="cityname">City Name:</label>
        <input type="text" {% if request.POST %} value="{{request.POST.cityname}}" {% else %} value="" {% endif %}class="form-control" id="cityname" placeholder="Enter city name" name="cityname"  >
        <span class="error"> {% if errorlist %} {{errorlist.city_name_err}} {% endif %}</span>
      </div>
      <button type="reset" class="btn btn-danger">Reset</button>
      <button type="submit" class="btn btn-primary">Save</button>
      <a href="{% url 'cityapp:list' %}">City List</a>
    </form>
{% endblock %}

{% block jscontent %} 
<script src="{% static 'cityapp/js/main.js' %}" ></script>
{% endblock  %}